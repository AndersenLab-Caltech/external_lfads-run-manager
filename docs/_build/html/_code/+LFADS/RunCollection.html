

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RunCollection &mdash; LFADS Run Manager 0.5.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="LFADS Run Manager 0.5.1 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> LFADS Run Manager
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../LFADS_Dataset.html">LFADS.Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LFADS_DatasetCollection.html">LFADS.DatasetCollection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LFADS_Run.html">LFADS.Run</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LFADS_RunCollection.html">LFADS.RunCollection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LFADS_RunParams.html">LFADS.RunParams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LFADS_PosteriorMeans.html">LFADS.PosteriorMeans</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">LFADS Run Manager</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>RunCollection</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for +LFADS.RunCollection</h1><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269</pre></div></td><td class="code"><div class="highlight"><pre style="max-width: 680px; overflow-x: scroll;"><a name="RunCollection"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection">[docs]</a><span></span><span class="k">classdef</span> <span class="n">RunCollection</span> <span class="o">&lt;</span> <span class="n">handle</span> <span class="o">&amp;</span> <span class="n">matlab</span><span class="p">.</span><span class="n">mixin</span><span class="p">.</span><span class="n">CustomDisplay</span> <span class="o">&amp;</span> <span class="n">matlab</span><span class="p">.</span><span class="n">mixin</span><span class="p">.</span><span class="n">Copyable</span>
    <span class="c">% A set of :ref:`LFADS_Run` instances sharing common parameter settings but utilizing</span>
    <span class="c">% different subsets of :ref:`LFADS_Dataset` insstances in a :ref:`LFADS_DatasetCollection`.</span>
    <span class="c">% A RunCollection is a logical grouping of otherwise independent LFADS runs, which are constrained</span>
    <span class="c">% to share a common Dataset collection and run parameters.</span>

    <span class="k">properties</span>
<a name="RunCollection.name"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.name">[docs]</a>        <span class="n">name</span> <span class="p">=</span> <span class="s">&#39;&#39;</span> <span class="c">% Name of this RunCollection, determines its relative path on disk</span>
<a name="RunCollection.comment"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.comment">[docs]</a>        <span class="n">comment</span> <span class="p">=</span> <span class="s">&#39;&#39;</span> <span class="c">% Textual comment for convenience</span>
<a name="RunCollection.rootPath"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.rootPath">[docs]</a>        <span class="n">rootPath</span> <span class="p">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span> <span class="c">% Root path on disk under which individual Runs will be stored</span>

<a name="RunCollection.datasetCollection"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.datasetCollection">[docs]</a>        <span class="n">datasetCollection</span> <span class="n">LFADS</span><span class="p">.</span><span class="n">DatasetCollection</span> <span class="c">% DatasetCollection instance</span>
    <span class="k">end</span>

    <span class="k">properties</span><span class="p">(</span><span class="n">SetAccess</span><span class="p">=</span><span class="n">protected</span><span class="p">)</span>
<a name="RunCollection.runs"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.runs">[docs]</a>        <span class="n">runs</span> <span class="c">% `nRunsEachParam` x `nParams` matrix of :ref:`LFADS_Run` instances</span>
<a name="RunCollection.params"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.params">[docs]</a>        <span class="n">params</span> <span class="c">% array of RunParams instances</span>
<a name="RunCollection.runSpecs"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.runSpecs">[docs]</a>        <span class="n">runSpecs</span>
    <span class="k">end</span>

    <span class="k">properties</span><span class="p">(</span><span class="n">Dependent</span><span class="p">)</span>
<a name="RunCollection.nParams"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.nParams">[docs]</a>        <span class="n">nParams</span> <span class="c">% number of parameter settings in `params`</span>
<a name="RunCollection.nRunsEachParam"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.nRunsEachParam">[docs]</a>        <span class="n">nRunsEachParam</span> <span class="c">% number of runs per each `RunParams` in `params`</span>
<a name="RunCollection.nRunsTotal"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.nRunsTotal">[docs]</a>        <span class="n">nRunsTotal</span> <span class="c">% number of runs total (equal to `nParams` * `nRunsEachParam`</span>
        
<a name="RunCollection.nDatasets"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.nDatasets">[docs]</a>        <span class="n">nDatasets</span> <span class="c">% number of datasets within the datasetCollection</span>
<a name="RunCollection.path"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.path">[docs]</a>        <span class="n">path</span> <span class="c">% unique folder given by rootPath/name</span>
<a name="RunCollection.fileShellScriptTensorboard"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.fileShellScriptTensorboard">[docs]</a>        <span class="n">fileShellScriptTensorboard</span> <span class="c">% path the location where a shell script to launch TensorBoard for all runs will be written</span>
    <span class="k">end</span>

    <span class="k">methods</span>
<a name="RunCollection.RunCollection"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.RunCollection">[docs]</a><span class="k">        function</span><span class="w"> </span>rc <span class="p">=</span><span class="w"> </span><span class="nf">RunCollection</span><span class="p">(</span>rootPath, name, datasetCollection, runParams, runSpecs<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% rc = RunCollection(rootPath, name, datasetCollection[, runParams, runSpecs])</span>
            <span class="c">%</span>
            <span class="c">% Args:</span>
            <span class="c">%   rootPath : string</span>
            <span class="c">%     location on disk under which run collections will be saved</span>
            <span class="c">%   name : string</span>
            <span class="c">%     unique identifier for this RunCollection, also used as subfolder within `rootPath`</span>
            <span class="c">%   datasetCollection : :ref:`LFADS_DatasetCollection`</span>
            <span class="c">%     DatasetCollection to be used by runs within this RunCollection</span>
            <span class="c">%   runParams : array of :ref:`LFADS_RunParams` instances</span>
            <span class="c">%     Parameter settings which will be used uniformly by all runs, will also be serialized in the folder path</span>
            <span class="c">%   runSpecs : array of :ref:`LFADS_RunSpec` instances</span>
            <span class="c">%     RunSpec instances describing the names and lists of</span>
            <span class="c">%     datasets for each run that will be run with each set of</span>
            <span class="c">%     params</span>


            <span class="n">rc</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
            <span class="n">rc</span><span class="p">.</span><span class="n">rootPath</span> <span class="p">=</span> <span class="n">rootPath</span><span class="p">;</span>
            <span class="n">rc</span><span class="p">.</span><span class="n">datasetCollection</span> <span class="p">=</span> <span class="n">datasetCollection</span><span class="p">;</span>
            <span class="k">if</span> <span class="n">nargin</span> <span class="o">&gt;</span> <span class="mi">3</span>
                <span class="n">rc</span><span class="p">.</span><span class="n">params</span> <span class="p">=</span> <span class="n">LFADS</span><span class="p">.</span><span class="n">Utils</span><span class="p">.</span><span class="n">makecol</span><span class="p">(</span><span class="n">runParams</span><span class="p">(:));</span>
            <span class="k">end</span>
            <span class="k">if</span> <span class="n">nargin</span> <span class="o">&gt;</span> <span class="mi">4</span>
                <span class="n">rc</span><span class="p">.</span><span class="n">runSpecs</span> <span class="p">=</span> <span class="n">LFADS</span><span class="p">.</span><span class="n">Utils</span><span class="p">.</span><span class="n">makecol</span><span class="p">(</span><span class="n">runSpecs</span><span class="p">(:));</span>
            <span class="k">end</span>
            
            <span class="n">rc</span><span class="p">.</span><span class="n">generateRuns</span><span class="p">();</span>
        <span class="k">end</span>
<a name="RunCollection.addRunSpec"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.addRunSpec">[docs]</a><span class="k">        </span>
<span class="k">        function</span><span class="w"> </span><span class="nf">addRunSpec</span><span class="p">(</span>rc, runSpecs<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Adds new RunSpec instance(s) to this RunCollection.</span>
            <span class="c">% Automatically appends new runs to `.runs`.</span>
            <span class="c">%</span>
            <span class="c">% Args:</span>
            <span class="c">%   runSpec : string</span>
            
            <span class="n">assert</span><span class="p">(</span><span class="n">isa</span><span class="p">(</span><span class="n">runSpecs</span><span class="p">,</span> <span class="s">&#39;LFADS.RunSpec&#39;</span><span class="p">),</span> <span class="s">&#39;Must be LFADS.RunSpec instance&#39;</span><span class="p">);</span>
            <span class="n">runSpecs</span> <span class="p">=</span> <span class="n">LFADS</span><span class="p">.</span><span class="n">Utils</span><span class="p">.</span><span class="n">makecol</span><span class="p">(</span><span class="n">runSpecs</span><span class="p">(:));</span>
            <span class="k">if</span> <span class="nb">isempty</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">runSpecs</span><span class="p">)</span>
                <span class="n">rc</span><span class="p">.</span><span class="n">runSpecs</span> <span class="p">=</span> <span class="n">runSpecs</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">rc</span><span class="p">.</span><span class="n">runSpecs</span> <span class="p">=</span> <span class="nb">cat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">runSpecs</span><span class="p">,</span> <span class="n">runSpecs</span><span class="p">);</span>
            <span class="k">end</span>
            
            <span class="n">rc</span><span class="p">.</span><span class="n">generateRuns</span><span class="p">();</span>
        <span class="k">end</span>
<a name="RunCollection.addParams"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.addParams">[docs]</a><span class="k">        </span>
<span class="k">        function</span><span class="w"> </span><span class="nf">addParams</span><span class="p">(</span>rc, params<span class="p">)</span><span class="w"></span>
<span class="w">            </span>
<span class="w">        </span><span class="k">end</span>

<span class="k">        function</span><span class="w"> </span>p <span class="p">=</span><span class="w"> </span><span class="nf">get.path</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span> <span class="nb">isempty</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">params</span><span class="p">)</span>
                <span class="n">paramStr</span> <span class="p">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">paramStr</span> <span class="p">=</span> <span class="p">[</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">params</span><span class="p">.</span><span class="n">generateSuffix</span><span class="p">()];</span>
            <span class="k">end</span>
            <span class="n">p</span> <span class="p">=</span> <span class="n">fullfile</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">rootPath</span><span class="p">,</span> <span class="p">[</span><span class="n">rc</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">paramStr</span><span class="p">]);</span>
        <span class="k">end</span>

<span class="k">        function</span><span class="w"> </span>f <span class="p">=</span><span class="w"> </span><span class="nf">get.fileShellScriptTensorboard</span><span class="p">(</span>r<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">f</span> <span class="p">=</span> <span class="n">fullfile</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;launch_tensorboard.sh&#39;</span><span class="p">);</span>
        <span class="k">end</span>
<a name="RunCollection.getRunsByName"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.getRunsByName">[docs]</a><span class="k">        </span>
<span class="k">        function</span><span class="w"> </span>runs <span class="p">=</span><span class="w"> </span><span class="nf">getRunsByName</span><span class="p">(</span>rc, names<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Find runs by their names. Throws an error if any run is not</span>
            <span class="c">% found.</span>
            <span class="c">%</span>
            <span class="c">% Args:</span>
            <span class="c">%   names (string or cellstr) : single name or cell array of</span>
            <span class="c">%     names to find</span>
            <span class="c">% Returns:</span>
            <span class="c">%   runs (LFADS.Run) : matching runs</span>
            <span class="c">%   idx (uint) : list of indices into `.runs` of matching run</span>
            <span class="c">%     instances</span>
            <span class="c">%</span>
            
            <span class="k">if</span> <span class="n">ischar</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
                <span class="n">names</span> <span class="p">=</span> <span class="p">{</span><span class="n">names</span><span class="p">};</span>
            <span class="k">end</span>
            <span class="p">[</span><span class="n">tf</span><span class="p">,</span> <span class="n">idx</span><span class="p">]</span> <span class="p">=</span> <span class="n">ismember</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="p">{</span><span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">.</span><span class="n">name</span><span class="p">});</span>
            <span class="n">assert</span><span class="p">(</span><span class="n">all</span><span class="p">(</span><span class="n">tf</span><span class="p">),</span> <span class="s">&#39;Some run names could not be found in this RunCollection&#39;</span><span class="p">);</span>
            
            <span class="n">runs</span> <span class="p">=</span> <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="n">idx</span><span class="p">);</span>
        <span class="k">end</span>
<a name="RunCollection.clearRuns"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.clearRuns">[docs]</a>
<span class="k">        function</span><span class="w"> </span><span class="nf">clearRuns</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Flush list of runs</span>

            <span class="n">rc</span><span class="p">.</span><span class="n">runs</span> <span class="p">=</span> <span class="p">[];</span>
        <span class="k">end</span>
<a name="RunCollection.filterRuns"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.filterRuns">[docs]</a>
<span class="k">        function</span><span class="w"> </span><span class="nf">filterRuns</span><span class="p">(</span>rc, mask<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Apply selection mask to list of runs</span>
            <span class="c">%</span>
            <span class="c">% Parameters</span>
            <span class="c">% ------------</span>
            <span class="c">% mask : logical or indices</span>
            <span class="c">%   selection mask applied to `.runs`</span>
            <span class="n">rc</span><span class="p">.</span><span class="n">runs</span> <span class="p">=</span> <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="n">mask</span><span class="p">);</span>
        <span class="k">end</span>
<span class="k">        </span>
<span class="k">        function</span><span class="w"> </span>n <span class="p">=</span><span class="w"> </span><span class="nf">get.nParams</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">n</span> <span class="p">=</span> <span class="nb">numel</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">params</span><span class="p">);</span>
        <span class="k">end</span>

<span class="k">        function</span><span class="w"> </span>n <span class="p">=</span><span class="w"> </span><span class="nf">get.nRunsTotal</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">n</span> <span class="p">=</span> <span class="nb">numel</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">);</span>
        <span class="k">end</span>
<span class="k">        </span>
<span class="k">        function</span><span class="w"> </span>n <span class="p">=</span><span class="w"> </span><span class="nf">get.nRunsEachParam</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">n</span> <span class="p">=</span> <span class="nb">numel</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">runSpecs</span><span class="p">);</span>
        <span class="k">end</span>

<span class="k">        function</span><span class="w"> </span>n <span class="p">=</span><span class="w"> </span><span class="nf">get.nDatasets</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">n</span> <span class="p">=</span> <span class="n">rc</span><span class="p">.</span><span class="n">datasetCollection</span><span class="p">.</span><span class="n">nDatasets</span><span class="p">;</span>
        <span class="k">end</span>
<a name="RunCollection.getTensorboardCommand"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.getTensorboardCommand">[docs]</a>
<span class="k">        function</span><span class="w"> </span>str <span class="p">=</span><span class="w"> </span><span class="nf">getTensorboardCommand</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Generates the shell command text to launch a TensorBoard displaying all runs within this collection</span>
            <span class="c">%</span>
            <span class="c">% Returns</span>
            <span class="c">% ---------</span>
            <span class="c">% cmd : string</span>
            <span class="c">%   Command which can luanch TensorBoard from command line</span>

            <span class="n">runEntry</span> <span class="p">=</span> <span class="n">cellvec</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">nRuns</span><span class="p">);</span>
            <span class="k">for</span> <span class="n">r</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">rc</span><span class="p">.</span><span class="n">nRuns</span>
                <span class="n">runEntry</span><span class="p">{</span><span class="n">r</span><span class="p">}</span> <span class="p">=</span> <span class="n">sprintf</span><span class="p">(</span><span class="s">&#39;%s:%s&#39;</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="n">r</span><span class="p">).</span><span class="n">name</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="n">r</span><span class="p">).</span><span class="n">pathLFADSOutput</span><span class="p">);</span>
            <span class="k">end</span>
            <span class="n">str</span> <span class="p">=</span> <span class="n">sprintf</span><span class="p">(</span><span class="s">&#39;tensorboard --logdir=%s&#39;</span><span class="p">,</span> <span class="n">strjoin</span><span class="p">(</span><span class="n">runEntry</span><span class="p">,</span> <span class="s">&#39;,&#39;</span><span class="p">));</span>
        <span class="k">end</span>
<a name="RunCollection.writeTensorboardShellScript"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.writeTensorboardShellScript">[docs]</a>
<span class="k">        function</span><span class="w"> </span>f <span class="p">=</span><span class="w"> </span><span class="nf">writeTensorboardShellScript</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Generates the shell command text to launch a TensorBoard displaying all runs within this collection</span>
            <span class="c">% and saves it to a file inside the RunCollection&#39;s path</span>
            <span class="c">%</span>
            <span class="c">% Returns</span>
            <span class="c">% ---------</span>
            <span class="c">% file : string</span>
            <span class="c">%   Path to the shell script, will match `.fileShellScriptTensorboard`</span>

            <span class="n">f</span> <span class="p">=</span> <span class="n">rc</span><span class="p">.</span><span class="n">fileShellScriptTensorboard</span><span class="p">;</span>
            <span class="n">fid</span> <span class="p">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">);</span>
            <span class="n">fprintf</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">getTensorboardCommand</span><span class="p">());</span>
            <span class="n">fclose</span><span class="p">(</span><span class="n">fid</span><span class="p">);</span>
            <span class="n">chmod</span><span class="p">(</span><span class="s">&#39;uga+rx&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">);</span>
        <span class="k">end</span>
<a name="RunCollection.addRun"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.addRun">[docs]</a>
<span class="k">        function</span><span class="w"> </span><span class="nf">addRun</span><span class="p">(</span>rc, r<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% addRun(run)</span>
            <span class="c">% Adds a :ref:`LFADS_Run` to the collection. Note that :ref:`LFADS_Run` instances are generally added to their Run Collection upon construction, so calling this method is likely unnecessary for the end user.</span>
            <span class="c">%</span>
            <span class="c">% Parameters</span>
            <span class="c">% ------------------</span>
            <span class="c">% run : :ref:`LFADS_Run`</span>
            <span class="c">%   Run to add to the collection.</span>

            <span class="k">if</span> <span class="nb">isempty</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">)</span>
                <span class="n">rc</span><span class="p">.</span><span class="n">runs</span> <span class="p">=</span> <span class="n">r</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="c">% check for existing run and replace it</span>
                <span class="n">names</span> <span class="p">=</span> <span class="n">arrayfun</span><span class="p">(@(</span><span class="n">oldR</span><span class="p">)</span> <span class="n">oldR</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">,</span> <span class="s">&#39;UniformOutput&#39;</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
                <span class="p">[</span><span class="n">tf</span><span class="p">,</span> <span class="n">idx</span><span class="p">]</span> <span class="p">=</span> <span class="n">ismember</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">names</span><span class="p">);</span>
                <span class="k">if</span> <span class="n">tf</span>
                    <span class="n">debug</span><span class="p">(</span><span class="s">&#39;Replacing existing run with matching name %s\n&#39;</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="n">idx</span><span class="p">).</span><span class="n">name</span><span class="p">);</span>
                    <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="p">=</span> <span class="n">r</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="k">end</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="p">:)</span> <span class="p">=</span> <span class="n">r</span><span class="p">;</span>
                <span class="k">end</span>
            <span class="k">end</span>
            <span class="n">r</span><span class="p">.</span><span class="n">runCollection</span> <span class="p">=</span> <span class="n">rc</span><span class="p">;</span>
        <span class="k">end</span>
<a name="RunCollection.loadSequenceData"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.loadSequenceData">[docs]</a><span class="k">        </span>
<span class="k">        function</span><span class="w"> </span><span class="nf">loadSequenceData</span><span class="p">(</span>rc, reload<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Call `loadSequenceData` on each run in this collection</span>

            <span class="k">if</span> <span class="n">nargin</span> <span class="o">&lt;</span> <span class="mi">2</span>
                <span class="n">reload</span> <span class="p">=</span> <span class="n">false</span><span class="p">;</span>
            <span class="k">end</span>
            <span class="n">prog</span> <span class="p">=</span> <span class="n">LFADS</span><span class="p">.</span><span class="n">Utils</span><span class="p">.</span><span class="n">ProgressBar</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">nRuns</span><span class="p">,</span> <span class="s">&#39;Loading sequence data&#39;</span><span class="p">);</span>
            <span class="k">for</span> <span class="nb">i</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">rc</span><span class="p">.</span><span class="n">nRuns</span>
                <span class="n">prog</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="nb">i</span><span class="p">);</span>
                <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="nb">i</span><span class="p">).</span><span class="n">loadSequenceData</span><span class="p">(</span><span class="n">reload</span><span class="p">);</span>
            <span class="k">end</span>
            <span class="n">prog</span><span class="p">.</span><span class="n">finish</span><span class="p">();</span>
        <span class="k">end</span>
<a name="RunCollection.loadPosteriorMeans"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.loadPosteriorMeans">[docs]</a><span class="k">        </span>
<span class="k">        function</span><span class="w"> </span><span class="nf">loadPosteriorMeans</span><span class="p">(</span>rc, reload<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Call `loadPosteriorMeans` on each run in this collection</span>

            <span class="k">if</span> <span class="n">nargin</span> <span class="o">&lt;</span> <span class="mi">2</span>
                <span class="n">reload</span> <span class="p">=</span> <span class="n">false</span><span class="p">;</span>
            <span class="k">end</span>
            <span class="n">prog</span> <span class="p">=</span> <span class="n">LFADS</span><span class="p">.</span><span class="n">Utils</span><span class="p">.</span><span class="n">ProgressBar</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">nRuns</span><span class="p">,</span> <span class="s">&#39;Loading posterior mean samples&#39;</span><span class="p">);</span>
            <span class="k">for</span> <span class="nb">i</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">rc</span><span class="p">.</span><span class="n">nRuns</span>
                <span class="n">prog</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="nb">i</span><span class="p">);</span>
                <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="nb">i</span><span class="p">).</span><span class="n">loadPosteriorMeans</span><span class="p">(</span><span class="n">reload</span><span class="p">);</span>
            <span class="k">end</span>
            <span class="n">prog</span><span class="p">.</span><span class="n">finish</span><span class="p">();</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">methods</span>
<a name="RunCollection.copyClearRuns"></a><a class="viewcode-back" style="background-color: white; padding-left: 0; z-index: 1000; position: relative;"href="../../LFADS_RunCollection.html#+LFADS.RunCollection.copyClearRuns">[docs]</a><span class="k">        function</span><span class="w"> </span>rc2 <span class="p">=</span><span class="w"> </span><span class="nf">copyClearRuns</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c">% Make a copy of this run collection, but without the runs inside</span>
            <span class="c">%</span>
            <span class="c">% Returns</span>
            <span class="c">% ---------</span>
            <span class="c">% rc : :ref:`LFADS_RunCollection`</span>
            <span class="c">%   Copy of RunCollection sans runs</span>
            <span class="n">rc2</span> <span class="p">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
            <span class="n">rc2</span><span class="p">.</span><span class="n">clearRuns</span><span class="p">();</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">methods</span> <span class="p">(</span><span class="n">Access</span> <span class="p">=</span> <span class="n">protected</span><span class="p">)</span>
<span class="k">       function</span><span class="w"> </span>header <span class="p">=</span><span class="w"> </span><span class="nf">getHeader</span><span class="p">(</span>rc<span class="p">)</span><span class="w"></span>
<span class="w">          </span><span class="k">if</span> <span class="o">~</span><span class="nb">isscalar</span><span class="p">(</span><span class="n">rc</span><span class="p">)</span>
             <span class="n">header</span> <span class="p">=</span> <span class="n">getHeader</span><span class="p">@</span><span class="n">matlab</span><span class="p">.</span><span class="n">mixin</span><span class="p">.</span><span class="n">CustomDisplay</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
          <span class="k">else</span>
             <span class="n">className</span> <span class="p">=</span> <span class="n">matlab</span><span class="p">.</span><span class="n">mixin</span><span class="p">.</span><span class="n">CustomDisplay</span><span class="p">.</span><span class="n">getClassNameForHeader</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
             <span class="n">header</span> <span class="p">=</span> <span class="n">sprintf</span><span class="p">(</span><span class="s">&#39;%s %s in %s\n&#39;</span><span class="p">,</span> <span class="n">className</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">path</span><span class="p">);</span>
             <span class="n">header</span> <span class="p">=</span> <span class="nb">cat</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">sprintf</span><span class="p">(</span><span class="s">&#39;  %d RunParams settings\n&#39;</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">nParams</span><span class="p">));</span>
             <span class="k">for</span> <span class="n">p</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">rc</span><span class="p">.</span><span class="n">nParams</span>
                 <span class="n">header</span> <span class="p">=</span> <span class="nb">cat</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">sprintf</span><span class="p">(</span><span class="s">&#39;  [%2d] %s\n&#39;</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">params</span><span class="p">(</span><span class="n">p</span><span class="p">).</span><span class="n">getSuffix</span><span class="p">));</span>
             <span class="k">end</span>
             
             <span class="n">header</span> <span class="p">=</span> <span class="nb">cat</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">sprintf</span><span class="p">(</span><span class="s">&#39;  %d runs per param setting, %d runs total\n&#39;</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">nRunsEachParam</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">nRunsTotal</span><span class="p">));</span>
             <span class="k">for</span> <span class="n">s</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">rc</span><span class="p">.</span><span class="n">nRunsEachParam</span>
                 <span class="n">header</span> <span class="p">=</span> <span class="nb">cat</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">sprintf</span><span class="p">(</span><span class="s">&#39;  [%2d] %s&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">rc</span><span class="p">.</span><span class="n">runs</span><span class="p">(</span><span class="n">s</span><span class="p">).</span><span class="n">getFirstLineHeader</span><span class="p">()));</span>
             <span class="k">end</span>
          <span class="k">end</span>
       <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></table>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Dan O&#39;Shea, Chethan Pandarinath.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>