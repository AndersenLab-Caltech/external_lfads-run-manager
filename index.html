



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation of LFADS Run Manager for Matlab">
      
      
      
        <meta name="author" content="Daniel J. O'Shea">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Overview - LFADS Run Manager</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    
    
      <script src="assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="red" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#lfads-run-manager-for-matlab-documentation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="LFADS Run Manager" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                LFADS Run Manager
              </span>
              <span class="md-header-nav__topic">
                Overview
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/lfads/lfads-run-manager/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      lfads/lfads-run-manager
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="." title="LFADS Run Manager" class="md-tabs__link md-tabs__link--active">
          LFADS Run Manager
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="single-session/" title="Training LFADS" class="md-tabs__link">
          Training LFADS
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="analysis/" title="Analyzing LFADS" class="md-tabs__link">
          Analyzing LFADS
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="files/" title="More details" class="md-tabs__link">
          More details
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="." title="LFADS Run Manager" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    LFADS Run Manager
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/lfads/lfads-run-manager/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      lfads/lfads-run-manager
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      LFADS Run Manager
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        LFADS Run Manager
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Overview
      </label>
    
    <a href="." title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-example" title="Quick example" class="md-nav__link">
    Quick example
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="matlab/" title="Matlab Classes and Packages" class="md-nav__link">
      Matlab Classes and Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="concepts/" title="Key Concepts" class="md-nav__link">
      Key Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="interfacing/" title="Interfacing with your Datasets" class="md-nav__link">
      Interfacing with your Datasets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Training LFADS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Training LFADS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="single-session/" title="Setting up a single-session run" class="md-nav__link">
      Setting up a single-session run
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="running/" title="Running LFADS" class="md-nav__link">
      Running LFADS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="hyperparameters/" title="Hyperparameters" class="md-nav__link">
      Hyperparameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="multisession/" title="Multisession Stitched Models" class="md-nav__link">
      Multisession Stitched Models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Analyzing LFADS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Analyzing LFADS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="analysis/" title="Analyzing LFADS Posterior Means" class="md-nav__link">
      Analyzing LFADS Posterior Means
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="trained-params/" title="Loading the Model Trained Parameters" class="md-nav__link">
      Loading the Model Trained Parameters
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      More details
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        More details
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="files/" title="File Organization" class="md-nav__link">
      File Organization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-example" title="Quick example" class="md-nav__link">
    Quick example
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/lfads/lfads-run-manager/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="lfads-run-manager-for-matlab-documentation">LFADS Run Manager for Matlab Documentation<a class="headerlink" href="#lfads-run-manager-for-matlab-documentation" title="Permanent link">&para;</a></h1>
<p>LFADS, or <a href="https://www.nature.com/articles/s41592-018-0109-9">Latent Factor Analysis via Dynamical Systems</a>, is a deep learning method to infer latent dynamics from single-trial neural spiking data. LFADS uses a nonlinear dynamical system (a recurrent neural network) to infer the dynamics underlying observed population activity and to extract ‘denoised’ single-trial firing rates from neural spiking data. Read the <a href="https://www.nature.com/articles/s41592-018-0109-9">LFADS manuscript</a>, published at Nature Methods, or the <a href="https://www.biorxiv.org/content/early/2017/06/20/152884">LFADS pre-print</a> for more details.</p>
<p>LFADS Run Manager is a set of tools, written in Matlab with some accompanying Python code, that help organize, train, and analyze LFADS models. It accompanies the actual <a href="https://github.com/tensorflow/models/tree/master/research/lfads">Python+Tensorflow LFADS code</a> which you will also need. We recommend using the Run Manager to organize your LFADS runs and to facilitate generation of the appropriate scripts to train your models and loading of the resulting model predictions for further analysis.</p>
<p>LFADS Run Manager was authored by <a href="http://djoshea.com">Daniel J O&rsquo;Shea</a> (<a href="https://twitter.com/djoshea">@djoshea</a>) with contributions from <a href="http://snel.gatech.edu/">Chethan Pandarinath</a> (<a href="https://twitter.com/chethan">@chethan</a>), <a href="https://research.google.com/pubs/DavidSussillo.html">David Sussillo</a> (<a href="https://twitter.com/sussillodavid">@SussilloDavid</a>), and Reza Keshtkaran.</p>
<p>LFADS Run Manager helps you to:</p>
<ul>
<li>Organize your spiking neural datasets that will be used to train LFADS models.</li>
<li>Setup a collection of training runs that vary in hyperparameter settings and the particular datasets included. The latter is particularly useful when generating <em>stitched</em> multisession LFADS models.</li>
<li>Generate shell scripts that will launch individual LFADS training runs <em>or</em> generate a script that will run the full set of runs somewhat in parallel by load balancing across GPUs and CPUs.</li>
<li>Load the posterior means and parameters of individual LFADS models after each has finished training.</li>
<li>Facilitate analysis, visualization, and comparison of the learned LFADS model generated factors, rates, etc.</li>
</ul>
<p>The code within the run manager helps organize LFADS runs and facilitate analysis, but ultimately calls the Python+Tensorflow LFADS code available on <a href="https://github.com/tensorflow/models/tree/master/research/lfads">Github</a>.</p>
<p>To use the run manager, you will need to author a few functions that perform specific data processing steps that are specific to your datasets, such as extracting spike times. The goal of the run manager is to facilitate the above common tasks in a fairly dataset agnostic way, sparing you the need to hand-generate many one-off scripts to export data to HD5 in the right locations, drive the Tensorflow training, and to load the results from disk.</p>
<h2 id="quick-example">Quick example<a class="headerlink" href="#quick-example" title="Permanent link">&para;</a></h2>
<p>We&rsquo;ll walkthrough this example in more detail in this documentation, but to give you an idea of how the run manager works, here&rsquo;s the Matlab code you&rsquo;d use to launch a couple of runs.</p>
<div class="codehilite"><pre><span></span><span class="c">% Identify the datasets you&#39;ll be using</span>
<span class="c">% Here we&#39;ll add one at ~/lorenz_example/datasets/dataset001.mat</span>
<span class="n">dc</span> <span class="p">=</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">DatasetCollection</span><span class="p">(</span><span class="s">&#39;~/lorenz_example/datasets&#39;</span><span class="p">);</span>
<span class="n">dc</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">&#39;lorenz_example&#39;</span><span class="p">;</span>
<span class="n">ds</span> <span class="p">=</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="s">&#39;dataset001.mat&#39;</span><span class="p">);</span> <span class="c">% adds this dataset to the collection</span>
<span class="n">dc</span><span class="p">.</span><span class="n">loadInfo</span><span class="p">;</span> <span class="c">% loads dataset metadata</span>

<span class="c">% Run a single model for each dataset, and one stitched run with all datasets</span>
<span class="n">runRoot</span> <span class="p">=</span> <span class="s">&#39;~/lorenz_example/runs&#39;</span><span class="p">;</span>
<span class="n">rc</span> <span class="p">=</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunCollection</span><span class="p">(</span><span class="n">runRoot</span><span class="p">,</span> <span class="s">&#39;example&#39;</span><span class="p">,</span> <span class="n">dc</span><span class="p">);</span>

<span class="c">% run files will live at ~/lorenz_example/runs/example/</span>

<span class="c">% Setup hyperparameters, 4 sets with number of factors swept through 2,4,6,8</span>
<span class="n">par</span> <span class="p">=</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunParams</span><span class="p">;</span>
<span class="n">par</span><span class="p">.</span><span class="n">spikeBinMs</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c">% rebin the data at 2 ms</span>
<span class="n">par</span><span class="p">.</span><span class="n">c_co_dim</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c">% no controller outputs --&gt; no inputs to generator</span>
<span class="n">par</span><span class="p">.</span><span class="n">c_batch_size</span> <span class="p">=</span> <span class="mi">150</span><span class="p">;</span> <span class="c">% must be &lt; 1/5 of the min trial count</span>
<span class="n">par</span><span class="p">.</span><span class="n">c_gen_dim</span> <span class="p">=</span> <span class="mi">64</span><span class="p">;</span> <span class="c">% number of units in generator RNN</span>
<span class="n">par</span><span class="p">.</span><span class="n">c_ic_enc_dim</span> <span class="p">=</span> <span class="mi">64</span><span class="p">;</span> <span class="c">% number of units in encoder RNN</span>
<span class="n">par</span><span class="p">.</span><span class="n">c_learning_rate_stop</span> <span class="p">=</span> <span class="mf">1e-3</span><span class="p">;</span> <span class="c">% we can stop really early for the demo</span>
<span class="n">parSet</span> <span class="p">=</span> <span class="n">par</span><span class="p">.</span><span class="n">generateSweep</span><span class="p">(</span><span class="s">&#39;c_factors_dim&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span><span class="p">]);</span>
<span class="n">rc</span><span class="p">.</span><span class="n">addParams</span><span class="p">(</span><span class="n">parSet</span><span class="p">);</span>

<span class="c">% Setup which datasets are included in each run, here just the one</span>
<span class="n">runName</span> <span class="p">=</span> <span class="n">dc</span><span class="p">.</span><span class="n">datasets</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">getSingleRunName</span><span class="p">();</span> <span class="c">% == &#39;single_dataset001&#39;</span>
<span class="n">rc</span><span class="p">.</span><span class="n">addRunSpec</span><span class="p">(</span><span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunSpec</span><span class="p">(</span><span class="n">runName</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>

<span class="c">% Generate files needed for LFADS input on disk</span>
<span class="n">rc</span><span class="p">.</span><span class="n">prepareForLFADS</span><span class="p">();</span>

<span class="c">% Write a python script that will train all of the LFADS runs using a</span>
<span class="c">% load-balancer against the available CPUs and GPUs</span>
<span class="n">rc</span><span class="p">.</span><span class="n">writeShellScriptRunQueue</span><span class="p">(</span><span class="s">&#39;display&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;virtualenv&#39;</span><span class="p">,</span> <span class="s">&#39;tensorflow&#39;</span><span class="p">);</span>
</pre></div>

<p>You&rsquo;ve now setup a 1x 4 grid of LFADS runs, spanning 4 different hyperparameter settings all on the same individual dataset</p>
<div class="codehilite"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">rc</span>

<span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunCollection</span> &quot;<span class="n">exampleRun</span>&quot; <span class="p">(</span><span class="mi">16</span> <span class="n">runs</span> <span class="n">total</span><span class="p">)</span>
  <span class="n">Dataset</span> <span class="n">Collection</span> &quot;<span class="n">lorenz_example</span>&quot; <span class="p">(</span><span class="mi">1</span> <span class="n">datasets</span><span class="p">)</span> <span class="n">in</span> <span class="o">~/</span><span class="n">lorenz_example</span><span class="o">/</span><span class="n">datasets</span>
  <span class="n">Path</span><span class="p">:</span> <span class="o">~/</span><span class="n">lorenz_example</span><span class="o">/</span><span class="n">runs</span><span class="o">/</span><span class="n">exampleRun</span>

  <span class="mi">4</span> <span class="n">parameter</span> <span class="n">settings</span>
    <span class="p">[</span><span class="mi">1</span> <span class="n">param_7I6XSW</span> <span class="n">data_cgrfui</span><span class="p">]</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunParams</span> <span class="n">useAlignmentMatrix</span><span class="p">=</span><span class="n">true</span> <span class="n">c_factors_dim</span><span class="p">=</span><span class="mi">2</span> <span class="n">c_ic_enc_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_gen_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_co_dim</span><span class="p">=</span><span class="mi">0</span> <span class="n">c_batch_size</span><span class="p">=</span><span class="mi">150</span> <span class="n">c_learning_rate_stop</span><span class="p">=</span><span class="mf">0.001</span>
    <span class="p">[</span><span class="mi">2</span> <span class="n">param_O4V73g</span> <span class="n">data_2_zdvC</span><span class="p">]</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunParams</span> <span class="n">useAlignmentMatrix</span><span class="p">=</span><span class="n">true</span> <span class="n">c_factors_dim</span><span class="p">=</span><span class="mi">4</span> <span class="n">c_ic_enc_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_gen_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_co_dim</span><span class="p">=</span><span class="mi">0</span> <span class="n">c_batch_size</span><span class="p">=</span><span class="mi">150</span> <span class="n">c_learning_rate_stop</span><span class="p">=</span><span class="mf">0.001</span>
    <span class="p">[</span><span class="mi">3</span> <span class="n">param_ngqEhM</span> <span class="n">data_GeiefE</span><span class="p">]</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunParams</span> <span class="n">useAlignmentMatrix</span><span class="p">=</span><span class="n">true</span> <span class="n">c_factors_dim</span><span class="p">=</span><span class="mi">6</span> <span class="n">c_ic_enc_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_gen_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_co_dim</span><span class="p">=</span><span class="mi">0</span> <span class="n">c_batch_size</span><span class="p">=</span><span class="mi">150</span> <span class="n">c_learning_rate_stop</span><span class="p">=</span><span class="mf">0.001</span>
    <span class="p">[</span><span class="mi">4</span> <span class="n">param_Qr2PeG</span> <span class="n">data_RE1kuL</span><span class="p">]</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunParams</span> <span class="n">useAlignmentMatrix</span><span class="p">=</span><span class="n">true</span> <span class="n">c_factors_dim</span><span class="p">=</span><span class="mi">8</span> <span class="n">c_ic_enc_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_gen_dim</span><span class="p">=</span><span class="mi">64</span> <span class="n">c_co_dim</span><span class="p">=</span><span class="mi">0</span> <span class="n">c_batch_size</span><span class="p">=</span><span class="mi">150</span> <span class="n">c_learning_rate_stop</span><span class="p">=</span><span class="mf">0.001</span>

  <span class="mi">1</span> <span class="n">run</span> <span class="n">specifications</span>
  <span class="p">[</span> <span class="mi">1</span><span class="p">]</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunSpec</span> &quot;<span class="n">single_dataset001</span>&quot; <span class="p">(</span><span class="mi">1</span> <span class="n">datasets</span><span class="p">)</span>

                          <span class="n">name</span><span class="p">:</span> <span class="s">&#39;exampleRun&#39;</span>
                       <span class="n">comment</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
                      <span class="n">rootPath</span><span class="p">:</span> <span class="s">&#39;~/lorenz_example/runs&#39;</span>
                       <span class="n">version</span><span class="p">:</span> <span class="mi">20171107</span>
             <span class="n">datasetCollection</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="n">x1</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">DatasetCollection</span><span class="p">]</span>
                          <span class="n">runs</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="n">x4</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">Run</span><span class="p">]</span>
                        <span class="n">params</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="n">x1</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunParams</span><span class="p">]</span>
                      <span class="n">runSpecs</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="n">x1</span> <span class="n">LorenzExperiment</span><span class="p">.</span><span class="n">RunSpec</span><span class="p">]</span>
                       <span class="n">nParams</span><span class="p">:</span> <span class="mi">4</span>
                     <span class="n">nRunSpecs</span><span class="p">:</span> <span class="mi">1</span>
                    <span class="n">nRunsTotal</span><span class="p">:</span> <span class="mi">4</span>
                     <span class="n">nDatasets</span><span class="p">:</span> <span class="mi">1</span>
                  <span class="n">datasetNames</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="n">x1</span> <span class="n">cell</span><span class="p">}</span>
                          <span class="n">path</span><span class="p">:</span> <span class="s">&#39;~/lorenz_example/runs/exampleRun&#39;</span>
      <span class="n">pathsCommonDataForParams</span><span class="p">:</span> <span class="p">{</span><span class="mi">4</span><span class="n">x1</span> <span class="n">cell</span><span class="p">}</span>
                <span class="n">pathsForParams</span><span class="p">:</span> <span class="p">{</span><span class="mi">4</span><span class="n">x1</span> <span class="n">cell</span><span class="p">}</span>
    <span class="n">fileShellScriptTensorboard</span><span class="p">:</span> <span class="s">&#39;~/lorenz_example/runs/exampleRun/launch_tensorboard.sh&#39;</span>
               <span class="n">fileSummaryText</span><span class="p">:</span> <span class="s">&#39;~/lorenz_example/runs/exampleRun/summary.txt&#39;</span>
       <span class="n">fileShellScriptRunQueue</span><span class="p">:</span> <span class="s">&#39;~/lorenz_example/runs/exampleRun/run_lfadsqueue.py&#39;</span>
</pre></div>

<p>Then you can simply run <code class="codehilite">python run_lfadsqueue.py</code>, a script which was automatically generated to fire off all the LFADS jobs in parallel, load-balancing as many as your system can handle across available GPUs. Then wait a few hours/days&hellip;</p>
<p>As they finish, you can load and visualize the results easily in Matlab. Here we plot the inferred, single-trial firing rates of the first neuron:</p>
<div class="codehilite"><pre><span></span><span class="n">run</span> <span class="p">=</span> <span class="n">rc</span><span class="p">.</span><span class="n">findRuns</span><span class="p">(</span><span class="s">&#39;single_dataset001&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">pm</span> <span class="p">=</span> <span class="n">run</span><span class="p">.</span><span class="n">loadPosteriorMeans</span><span class="p">();</span>
<span class="n">rates1</span> <span class="p">=</span> <span class="nb">squeeze</span><span class="p">(</span><span class="n">pm</span><span class="p">.</span><span class="n">rates</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:));</span> <span class="c">% time x trials</span>
<span class="c">...</span>
</pre></div>

<p>The single-trial smoothed rates, colored by condition then look like:</p>
<p><img alt="Rates neuron 1" src="images/example_rates.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="install/" title="Installation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Installation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 &mdash; <a href="http://djoshea.com">Daniel J. O&#39;Shea</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="./assets/fonts/font-awesome.css">
    
      <a href="https://github.com/lfads" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/djoshea" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-322693-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-322693-7');
</script>

  </body>
</html>